(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["video"],{"007b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pl20 pr20 pt20 pb20"},[a("div",{staticClass:"like-edit pl20 pr20"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"label pull-left"},[t._v("视频管理")]),a("div",{staticClass:"query pa pub-flex pub-jc-center"},[a("div",{staticClass:"pub-flex pub-jc-center pub-ai-center"},[a("div",{staticClass:"picker-label"},[t._v("分类:")]),a("div",[a("el-select",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"分类"},model:{value:t.matchQuery["video_type"],callback:function(e){t.$set(t.matchQuery,"video_type",e)},expression:"matchQuery['video_type']"}},t._l(t.restaurants,(function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t._id}})})),1)],1),a("div",{staticClass:"picker-label"},[t._v("置顶:")]),a("div",[a("el-select",{staticStyle:{width:"95px"},attrs:{size:"small",placeholder:"置顶"},model:{value:t.matchQuery["popular"],callback:function(e){t.$set(t.matchQuery,"popular",e)},expression:"matchQuery['popular']"}},[a("el-option",{attrs:{label:"【全部】",value:""}}),a("el-option",{attrs:{label:"开/置顶",value:!0}}),a("el-option",{attrs:{label:"关/置顶",value:!1}})],1)],1),a("div",{staticClass:"picker-label"},[t._v("轮播:")]),a("div",[a("el-select",{staticStyle:{width:"95px"},attrs:{size:"small",placeholder:"轮播"},model:{value:t.matchQuery["openSwiper"],callback:function(e){t.$set(t.matchQuery,"openSwiper",e)},expression:"matchQuery['openSwiper']"}},[a("el-option",{attrs:{label:"【全部】",value:""}}),a("el-option",{attrs:{label:"开/轮播",value:!0}}),a("el-option",{attrs:{label:"关/轮播",value:!1}})],1)],1),a("div",{staticClass:"picker-label"},[t._v("留言:")]),a("div",[a("el-select",{staticStyle:{width:"95px"},attrs:{size:"small",placeholder:"留言"},model:{value:t.matchQuery["allow_reply"],callback:function(e){t.$set(t.matchQuery,"allow_reply",e)},expression:"matchQuery['allow_reply']"}},[a("el-option",{attrs:{label:"【全部】",value:""}}),a("el-option",{attrs:{label:"开/留言",value:!0}}),a("el-option",{attrs:{label:"关/留言",value:!1}})],1)],1),a("div",{staticClass:"picker-label"},[t._v("显示:")]),a("div",[a("el-select",{staticStyle:{width:"95px"},attrs:{size:"small",placeholder:"显示"},model:{value:t.matchQuery["display"],callback:function(e){t.$set(t.matchQuery,"display",e)},expression:"matchQuery['display']"}},[a("el-option",{attrs:{label:"【全部】",value:""}}),a("el-option",{attrs:{label:"开/显示",value:!0}}),a("el-option",{attrs:{label:"关/显示",value:!1}})],1)],1)]),a("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"请输入内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchData(e)}},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[a("el-button",{staticClass:"pointer",attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchData},slot:"append"})],1)],1),a("div",{staticClass:"pull-right edit"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-refresh"},on:{click:t.pullData}},[t._v("刷新数据")])],1)])]),a("div",{staticClass:"table mt20",attrs:{time:"1573723242882"}},[a("div",{staticClass:"pl20 pr20"},[a("div",{staticClass:"filter-cood"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.editBox,expression:"editBox"}],staticClass:"pr20"},[a("div",{staticClass:"in-block division pr20 mr20"},[t._v(" 已选择 "),a("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.selectLen))]),t._v(" 项 ")]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将永久删除多条数据, 是否继续?","deleteData")}}},[a("i",{staticClass:"fa fa-trash pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("删除")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量开启源排序多条数据，是否继续?","changeDataState",{scource_sort:!0})}}},[a("i",{staticClass:"fa fa-sort-amount-desc pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("开/源排序")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量关闭源排序多条数据，是否继续?","changeDataState",{scource_sort:!1})}}},[a("i",{staticClass:"fa fa-sort-amount-asc pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("关/源排序")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量开启推荐多条数据，是否继续?","changeDataState",{openSwiper:!0})}}},[a("i",{staticClass:"fa fa-star pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("开/轮播图")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量关闭推荐多条数据，是否继续?","changeDataState",{openSwiper:!1})}}},[a("i",{staticClass:"fa fa-star-o pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("关/轮播图")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量开启置顶多条数据，是否继续?","changeDataState",{popular:!0})}}},[a("i",{staticClass:"fa fa-star pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("开/置顶")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量关闭置顶多条数据，是否继续?","changeDataState",{popular:!1})}}},[a("i",{staticClass:"fa fa-star-o pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("关/置顶")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量显示多条数据，是否继续?","changeDataState",{display:!0})}}},[a("i",{staticClass:"fa fa-toggle-on pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("显示")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量隐藏多条数据，是否继续?","changeDataState",{display:!1})}}},[a("i",{staticClass:"fa fa-toggle-off pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("隐藏")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量允许留言多条数据，是否继续?","changeDataState",{allow_reply:!0})}}},[a("i",{staticClass:"fa fa-send pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("开/留言")])]),a("div",{staticClass:"pointer edit-item-btn mr20",on:{click:function(e){return t.remindDialog(t.curSelectItem,"此操作将批量禁止留言多条数据，是否继续?","changeDataState",{allow_reply:!1})}}},[a("i",{staticClass:"fa fa-send-o pr5",attrs:{"aria-hidden":"true"}}),a("span",[t._v("关/留言")])])])])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,height:t.tabHight,"show-overflow-tooltip":!1,selection:"",border:""},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"44"}}),a("el-table-column",{attrs:{prop:"videoTitle",label:"视频名称",sortable:!0,width:"240","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.$Bus.$emit("changeVideoDrawerState",{data:{play_id:e.row._id,video_info:e.row},is_pull:!0,showState:!0})}}},[t._v(t._s(e.row.videoTitle))])]}}])}),a("el-table-column",{attrs:{prop:"remind_tip",label:"更新状态",sortable:!1,"show-overflow-tooltip":!0,width:"160"}}),a("el-table-column",{attrs:{prop:"video_rate",label:"评分",sortable:!1,"show-overflow-tooltip":!0,width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-center",style:{color:e.row.video_rate>6?"#F56C6C":"#606266","font-weight":"bold"}},[t._v(t._s(e.row.video_rate))])]}}])}),a("el-table-column",{attrs:{prop:"scource_sort",label:"是否已开启源排序",sortable:!1,"show-overflow-tooltip":!0,width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-center"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},on:{change:function(a){return t.changeVideoState(e.row._id,a,"scource_sort",e.row)}},model:{value:e.row.scource_sort,callback:function(a){t.$set(e.row,"scource_sort",a)},expression:"scope.row.scource_sort"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"openSwiper",label:"开启轮播",sortable:!1,width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-center"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},on:{change:function(a){return t.changeVideoState(e.row._id,a,"openSwiper",e.row)}},model:{value:e.row.openSwiper,callback:function(a){t.$set(e.row,"openSwiper",a)},expression:"scope.row.openSwiper"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"popular",label:"置顶",sortable:!1,width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-center"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},on:{change:function(a){return t.changeVideoState(e.row._id,a,"popular",e.row)}},model:{value:e.row.popular,callback:function(a){t.$set(e.row,"popular",a)},expression:"scope.row.popular"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"display",label:"是否显示",sortable:!1,width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-center"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},on:{change:function(a){return t.changeVideoState(e.row._id,a,"display",e.row)}},model:{value:e.row.display,callback:function(a){t.$set(e.row,"display",a)},expression:"scope.row.display"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"allow_reply",label:"是否允许留言",sortable:!1,width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-center"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},on:{change:function(a){return t.changeVideoState(e.row._id,a,"allow_reply",e.row)}},model:{value:e.row.allow_reply,callback:function(a){t.$set(e.row,"allow_reply",a)},expression:"scope.row.allow_reply"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:!0,width:"160"}}),a("el-table-column",{attrs:{prop:"video_type",label:"视频类型",sortable:!0,width:"160"}}),a("el-table-column",{attrs:{prop:"language",label:"语言",sortable:!0,width:"160"}}),a("el-table-column",{attrs:{prop:"sub_region",label:"发布地区",sortable:!1,width:"160"}}),a("el-table-column",{attrs:{prop:"rel_time",label:"上映时间",sortable:!0,width:"105"}}),a("el-table-column"),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"334"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-center"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"静态化",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.$Bus.$emit("changeVideoStaticDialog",{_id:e.row._id,videoTitle:e.row.videoTitle,showState:!0})}}},[a("i",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}})])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看信息",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.$Bus.$emit("changeVideoDrawerState",{data:{play_id:e.row._id,video_info:e.row},is_pull:!0,showState:!0})}}},[a("i",{staticClass:"fa fa-certificate",attrs:{"aria-hidden":"true"}})])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"源管理",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return t.$Bus.$emit("changeVideoSource",{_id:e.row._id,videoTitle:e.row.videoTitle,showState:!0})}}},[a("i",{staticClass:"fa fa-sort-amount-desc",attrs:{"aria-hidden":"true"}})])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改评分",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.$Bus.$emit("changeVideoRateDialog",{_id:e.row._id,videoTitle:e.row.videoTitle,video_rate:e.row.video_rate,showState:!0})}}},[a("i",{staticClass:"fa fa-star",attrs:{"aria-hidden":"true"}})])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑视频",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.$router.push({path:"/main/write-video",query:{_id:e.row._id}})}}},[a("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除视频",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.remindDialog([e.row],"此操作将永久删除该数据, 是否继续?","deleteData")}}},[a("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])],1)],1)]}}])})],1),a("div",{staticClass:"page-list"},[a("div",{staticClass:"pr20"},[a("el-pagination",{staticClass:"pr20",attrs:{"current-page":t.curPageNum,"page-sizes":[15,30,60,100],"page-size":t.curPageLen,layout:"total, sizes, prev, pager, next, jumper",total:t.pageTotal},on:{"size-change":t.changePageLen,"current-change":t.pullNewPageData}})],1)])],1),a("dialog-static"),a("dialog-rate",{on:{update:function(e){return t.pullData({loading:!1,msgTip:!1})}}}),a("drawer-info"),a("dialog-player"),a("dialog-source")],1)},l=[],s=(a("425f"),a("7d72"),a("bc4a"),a("c12e"),a("2798"),a("48d1"),a("8b46")),o=a("c24f7"),r=a("71b7"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.videoTitle,visible:t.showState,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.showState=e}}},[a("div",{staticClass:"row-item clearfix"},[a("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("评分：")]),a("div",{staticClass:"row-con"},[a("div",{staticClass:"pub-flex",staticStyle:{height:"32px","justify-content":"flex-start"}},[a("el-rate",{attrs:{max:10,"allow-half":!1,"show-text":!1},model:{value:t.video_rate,callback:function(e){t.video_rate=t._n(e)},expression:"video_rate"}})],1)])]),a("div",{staticClass:"mt20 text-right"},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:t.updateVideoInfo}},[t._v("确认")])],1)])],1)},c=[],d=a("093a"),u={data:function(){return{_id:"",video_rate:0,showState:!1,videoTitle:""}},methods:{updateVideoInfo:function(){var t=this;Object(d["c"])({list:[this._id],info:{video_rate:this.video_rate}},{loading:!0}).then((function(e){t.ajaxMsgTips(e),200===e.data.code&&(t.$emit("update"),t.showState=!1)}))}},watch:{showState:function(t,e){t||(this.video_rate=0,this.videoTitle="")}},created:function(){var t=this;this.$Bus.$off("changeVideoRateDialog"),this.$Bus.$on("changeVideoRateDialog",(function(e){t.showState=e.showState,t.videoTitle=e.showState?e.videoTitle:"",t.video_rate=e.showState?e.video_rate:0,t._id=e.showState?e._id:""}))}},p=u,h=(a("6694"),a("5d22")),f=Object(h["a"])(p,n,c,!1,null,"d95463aa",null),v=f.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.videoTitle,visible:t.showState,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.showState=e}}},[a("div",{staticClass:"row-item clearfix"},[a("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("详情页：")]),a("div",{staticClass:"row-con"},[a("div",{staticClass:"pub-flex",staticStyle:{height:"32px","justify-content":"flex-start"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.static.detill,callback:function(e){t.$set(t.static,"detill",e)},expression:"static.detill"}})],1)])]),a("div",{staticClass:"row-item clearfix"},[a("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("播放页：")]),a("div",{staticClass:"row-con"},[a("div",{staticClass:"pub-flex",staticStyle:{height:"32px","justify-content":"flex-start"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.static.player,callback:function(e){t.$set(t.static,"player",e)},expression:"static.player"}})],1)])]),a("div",{staticClass:"row-item clearfix"},[a("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("域地址：")]),a("div",{staticClass:"row-con"},[a("div",{staticClass:"pub-flex",staticStyle:{height:"32px","justify-content":"flex-start"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.remoteUrl,callback:function(e){t.remoteUrl=e},expression:"remoteUrl"}})],1),a("div",{staticStyle:{color:"#F56C6C"}},[t._v("警告：请在上线后使用静态化")])])]),a("div",{staticClass:"mt20 text-right"},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:t.saveStatic}},[t._v("确认")])],1)])],1)},g=[],b=a("b893"),w={data:function(){return{_id:"",showState:!1,videoTitle:"",remoteUrl:"",static:{detill:!0,player:!0}}},methods:{saveStatic:function(){var t=this;if(Object(b["d"])())this.ajaxMsgTips({data:{code:500,text:"本地不允许执行，必须部署远程"}});else{var e=this.remoteUrl.length,a="/"===this.remoteUrl.charAt(e-1)?this.remoteUrl.substring(0,e-1):this.remoteUrl;Object(d["d"])({_id:this._id,remoteUrl:a,detill:this.static.detill,player:this.static.player},{loading:!0}).then((function(e){t.ajaxMsgTips(e),200===e.data.code&&(t.showState=!1)}))}}},watch:{showState:function(t,e){t||(this.static={detill:!0,player:!0},this.videoTitle="")}},created:function(){var t=this;this.$Bus.$off("changeVideoStaticDialog"),this.$Bus.$on("changeVideoStaticDialog",(function(e){var a=window.location;t.showState=e.showState,t.videoTitle=e.showState?e.videoTitle:"",t._id=e.showState?e._id:"",t.remoteUrl=a.protocol+"//"+a.host}))}},y=w,_=(a("a310"),Object(h["a"])(y,m,g,!1,null,"ea0cace8",null)),S=_.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog-edit-cource",attrs:{time:"1578144601505"}},[a("el-dialog",{attrs:{title:t.videoTitle,visible:t.showState,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.showState=e}}},[a("el-tabs",{attrs:{type:"card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"播放源管理",name:"manage"}},[a("div",{staticClass:"tab-con pub-flex pub-column"},[a("div",{staticClass:"text-left pub-flex pb10",staticStyle:{width:"100%"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.SourceUpdateSort}},[t._v("更新排序")]),a("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("排序之后需要点击更新排序才会生效")])],1),a("div",{staticClass:"pub-flex1",staticStyle:{width:"100%"}},t._l(t.curSource,(function(e,i){return a("div",{key:e.z_name,staticClass:"row-item pub-flex"},[a("i",{staticClass:"fa fa-telegram mr10",staticStyle:{color:"#67C23A"},attrs:{"aria-hidden":"true"}}),a("span",[t._v(t._s(e.name))]),a("div",{staticClass:"pub-flex1"}),a("i",{staticClass:"pointer fa fa-arrow-up ml10",staticStyle:{color:"#409EFF"},attrs:{"aria-hidden":"true"},on:{click:function(e){return t.moveCurSourcePos("top",i)}}}),a("i",{staticClass:"pointer fa fa-arrow-down ml10",staticStyle:{color:"#409EFF"},attrs:{"aria-hidden":"true"},on:{click:function(e){return t.moveCurSourcePos("bottom",i)}}}),a("i",{staticClass:"pointer fa fa-pencil ml10",staticStyle:{color:"#E6A23C"},on:{click:function(a){return t.changeEditMode(e)}}}),a("i",{staticClass:"pointer fa fa-trash ml10",staticStyle:{color:"#F56C6C"},on:{click:function(a){return t.remindDialog({type:"remove",_id:e._id,text:"此操作将永久删除该数据, 是否继续？"})}}})])})),0)])]),a("el-tab-pane",{attrs:{label:"播放源编辑",name:"edit"}},[a("div",{staticClass:"tab-con pub-column"},[a("div",{staticClass:"pub-flex mt20",staticStyle:{width:"100%"}},[a("div",{staticClass:"pub-flex",staticStyle:{width:"200px"}},[a("span",{staticClass:"row-label",staticStyle:{width:"110px"}},[t._v("源类型：")]),a("el-select",{staticClass:"pr20",attrs:{size:"small",placeholder:"请选择"},model:{value:t.target.type,callback:function(e){t.$set(t.target,"type",e)},expression:"target.type"}},t._l([{k:"内置播放器",v:"player"},{k:"外链播放器",v:"iframe"}],(function(t){return a("el-option",{key:t.v,attrs:{label:t.k,value:t.v}})})),1)],1),a("div",{staticClass:"pr20 pub-flex",staticStyle:{width:"200px"}},[a("span",{staticClass:"row-label"},[t._v("源名称：")]),a("div",{staticClass:"pub-flex1"},[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.target.name,callback:function(e){t.$set(t.target,"name",e)},expression:"target.name"}})],1)])]),a("div",{staticClass:"mt20",staticStyle:{width:"100%"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",rows:8,"show-word-limit":""},model:{value:t.curSourceText,callback:function(e){t.curSourceText=e},expression:"curSourceText"}})],1),t.isEdit?a("div",{staticClass:"mt20 pub-flex",staticStyle:{width:"100%"}},[t.isEdit?a("div",{staticClass:"pr20"},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:t.resetTargetData}},[t._v("切换到新增模式")])],1):t._e(),a("div",{staticClass:"pub-flex1 pr20"},[a("el-alert",{attrs:{title:"您正在对播放源进行编辑",type:"warning",closable:!1}})],1),a("div",[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){return t.remindDialog({type:"update",text:"是否确认更新该播放源信息？"})}}},[t._v("确认修改")])],1)]):a("div",{staticClass:"text-right mt20",staticStyle:{width:"100%"}},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.remindDialog({type:"add",text:"是否确认添加该播放源到列表？"})}}},[t._v("确认添加")])],1)])])],1)],1)],1)},C=[],k=(a("bf00"),a("df47"),a("ec76"),a("960e"),a("a1be")),T={data:function(){return{isEdit:!1,activeName:"manage",showState:!1,videoTitle:"",curVideoId:"",curSource:[],target:{name:"",type:"player"},curSourceText:""}},watch:{showState:function(t,e){this.activeName="manage"}},methods:{changeEditMode:function(t){this.isEdit=!0,this.activeName="edit",this.target={_id:t._id,name:t.name,type:t.type,vid:t.vid},this.curSourceText=t.list.split("#").join("\n")},resetTargetData:function(){this.target={name:"",type:"player"},this.curSourceText="",this.isEdit=!1},execAddSource:function(){var t=this;this.target.name.trim()?Object(d["a"])({name:this.target.name,type:this.target.type,z_name:(new Date).getTime()+"",list:this.curSourceText.split("\n").filter((function(t){return t&&t.trim()})).join("#"),vid:this.curVideoId},{loading:!0}).then((function(e){t.ajaxMsgTips(e),200===e.data.code&&(t.resetTargetData(),t.pullData({loading:!1,_id:t.curVideoId,msgTip:!1}))})):this.$message({type:"warning",message:"播放源名称必填！",duration:1e3})},execEditSource:function(){var t=this;this.target.name.trim()?Object(d["n"])({_id:this.target._id,name:this.target.name,type:this.target.type,list:this.curSourceText.split("\n").filter((function(t){return t&&t.trim()})).join("#"),vid:this.target.vid}).then((function(e){t.ajaxMsgTips(e),200===e.data.code&&t.pullData({loading:!1,_id:t.curVideoId,msgTip:!1})})):this.$message({type:"warning",message:"播放源名称必填！",duration:1e3})},remindDialog:function(t){var e=this;this.$confirm(t.text,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"remove"===t.type?e.deleteData(_id):"add"===t.type?e.execAddSource():"update"===t.type&&e.execEditSource()})).catch((function(){}))},SourceUpdateSort:function(){var t=this;if(this.curSource.length){var e,a=[],i=Object(s["a"])(this.curSource);try{for(i.s();!(e=i.n()).done;){var l=e.value;a.push({_id:l._id,index:l.index})}}catch(o){i.e(o)}finally{i.f()}Object(d["l"])({list:a},{loading:!0}).then((function(e){t.ajaxMsgTips(e),200===e.data.code&&t.pullData({_id:t.curVideoId,loading:!1,msgTip:!1})}))}},deleteData:function(t){var e=this;Object(d["k"])({_id:t},{loading:!0}).then((function(t){e.ajaxMsgTips(t),200===t.data.code&&e.pullData({_id:e.curVideoId,loading:!1,msgTip:!1})}))},resetSourceItemIndex:function(){var t,e=Object(s["a"])(this.curSource.entries());try{for(e.s();!(t=e.n()).done;){var a=Object(k["a"])(t.value,2),i=a[0],l=a[1];l["index"]=i}}catch(o){e.e(o)}finally{e.f()}},moveCurSourcePos:function(t,e){if("top"===t){if(0===e)return;var a=this.curSource[e-1],i=this.curSource[e];return this.$set(this.curSource,e-1,i),this.$set(this.curSource,e,a),void this.resetSourceItemIndex()}if("bottom"===t){if(e===this.curSource.length-1)return;var l=this.curSource[e+1],s=this.curSource[e];this.$set(this.curSource,e+1,s),this.$set(this.curSource,e,l),this.resetSourceItemIndex()}},pullData:function(t){var e=this;Object(d["h"])({_id:t._id},{loading:t.loading}).then((function(a){t.msgTip&&e.ajaxMsgTips(a),200===a.data.code&&(e.curSource=a.data.value,t.cb&&"function"===typeof t.cb&&t.cb())}))}},created:function(){var t=this;this.$Bus.$off("changeVideoSource"),this.$Bus.$on("changeVideoSource",(function(e){t.curVideoId=e.showState?e._id:"",t.videoTitle=e.showState?e.videoTitle:"",e.showState?t.pullData({cb:function(){t.showState=e.showState},_id:e._id,loading:!0,msgTip:!1}):t.showState=!1}))}},D=T,I=(a("79f9"),Object(h["a"])(D,x,C,!1,null,"063f3934",null)),$=I.exports,j=a("cc69"),N={components:{DialogRate:v,DrawerInfo:o["a"],DialogStatic:S,DialogPlayer:r["a"],DialogSource:$},data:function(){return{loading:!0,editBox:!1,searchVal:"",curSelectItem:[],selectLen:0,tableData:[],tabHight:0,pageTotal:0,curPageNum:1,curPageLen:15,restaurants:[],matchQuery:{video_type:"",popular:"",openSwiper:"",allow_reply:"",display:""}}},methods:{remindDialog:function(t,e,a,i){var l=this;this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l[a](t,i)})).catch((function(){}))},changeDataState:function(t,e){var a=this,i=t.createObjIdArr();Object(d["c"])({list:i,info:e||{}},{loading:!0}).then((function(t){a.ajaxMsgTips(t),200===t.data.code&&a.pullData({loading:!1,msgTip:!1})}))},deleteData:function(t){var e=this,a=t.createObjIdArr();Object(d["p"])({list:a},{loading:!0}).then((function(t){e.ajaxMsgTips(t),200===t.data.code&&e.pullData({loading:!1,msgTip:!1})}))},changeVideoState:function(t,e,a,i){var l=this,s={};s[a]=e,Object(d["c"])({info:s,list:[t]},{loading:!0}).then((function(t){l.ajaxMsgTips(t),i[a]=200===t.data.code?e:!e,l.pullData({loading:!1,msgTip:!1})}))},searchData:function(){this.editBox=!1,this.curSelectItem=[],this.selectLen=0,this.tableData=[],this.pageTotal=0,this.curPageNum=1,this.curPageLen=15,this.pullData({loading:!1,msgTip:!0})},selectionChange:function(t){this.selectLen=t.length,this.curSelectItem=t,t.length?this.editBox=!0:this.editBox=!1},pullNewPageData:function(t){this.curPageNum=t,this.pullData({loading:!1,msgTip:!1})},changePageLen:function(t){this.curPageLen=t,this.curPageNum=1,this.pullData({loading:!1,msgTip:!1})},getTableHeight:function(){var t=function(t){return document.getElementsByClassName(t)[0]},e=function(t,e){return Number(window.getComputedStyle(t,null)[e].split("px")[0])},a=document.body.clientHeight,i=t("header-nav").clientHeight,l=t("like-edit"),s=l.clientHeight,o=t("filter-cood").clientHeight,r=t("page-list").clientHeight,n=t("cpt-con"),c=t("table");this.tabHight=a-(i+44+s+r+o+e(c,"margin-top")+e(n,"padding-top")+e(n,"padding-bottom"))},pullNavData:function(){var t=this;Object(j["b"])({},{loading:!1}).then((function(e){if(200===e.data.code){var a,i=[{name:"【不选择】",_id:""}],l=Object(s["a"])(e.data.value);try{for(l.s();!(a=l.n()).done;){var o=a.value;if("video"===o.nav_type&&(i.push({name:o.name,_id:o._id}),o.children&&o.children.length)){var r,n=Object(s["a"])(o.children);try{for(n.s();!(r=n.n()).done;){var c=r.value;i.push({name:"┣━"+c.name,_id:c._id})}}catch(d){n.e(d)}finally{n.f()}}}}catch(d){l.e(d)}finally{l.f()}t.restaurants=i}}))},pullData:function(t){var e=this,a=t.loading,i=void 0!==a&&a,l=t.msgTip,s=void 0!==l&&l;this.loading=!0;var o={page:this.curPageNum,limit:this.curPageLen};this.searchVal&&(o.search=this.searchVal);var r=this.matchQuery,n={};for(var c in r){var u=r[c];""!==u&&(n[c]=u)}o["type"]=n,Object(d["i"])(o,{loading:i}).then((function(t){if(s&&e.ajaxMsgTips(t),200===t.data.code){var a=t.data.value;e.tableData=a.result,e.pageTotal=a.total}})).finally((function(){e.loading=!1}))}},created:function(){this.pullData({loading:!1,msgTip:!0}),this.pullNavData()},mounted:function(){var t=this;this.$nextTick((function(){t.getTableHeight(),window.onresize=t.getTableHeight}))},beforeDestroy:function(){window.onresize=null}},V=N,E=(a("f3d2"),a("1589"),Object(h["a"])(V,i,l,!1,null,"77523de4",null));e["default"]=E.exports},"03ce":function(t,e,a){},1589:function(t,e,a){"use strict";a("abf2")},"1d47":function(t,e,a){},"23f5":function(t,e,a){var i=a("abdd"),l=a("cf6a");t.exports=function(t,e,a){var s,o;return l&&"function"==typeof(s=e.constructor)&&s!==a&&i(o=s.prototype)&&o!==a.prototype&&l(t,o),t}},6694:function(t,e,a){"use strict";a("1d47")},"79f9":function(t,e,a){"use strict";a("b970")},"7d72":function(t,e,a){"use strict";var i=a("6dd5"),l=a("9fd9"),s=a("d1a0"),o=a("91f2"),r=a("5b09"),n=a("d9a5"),c=a("23f5"),d=a("0ba2"),u=a("a2e9"),p=a("f628"),h=a("34a8").f,f=a("f2e6").f,v=a("d3f4").f,m=a("2f7b").trim,g="Number",b=l[g],w=b.prototype,y=n(p(w))==g,_=function(t){var e,a,i,l,s,o,r,n,c=d(t,!1);if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,l=49;break;case 79:case 111:i=8,l=55;break;default:return+c}for(s=c.slice(2),o=s.length,r=0;r<o;r++)if(n=s.charCodeAt(r),n<48||n>l)return NaN;return parseInt(s,i)}return+c};if(s(g,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var S,x=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof x&&(y?u((function(){w.valueOf.call(a)})):n(a)!=g)?c(new b(_(e)),a,x):_(e)},C=i?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;C.length>k;k++)r(b,S=C[k])&&!r(x,S)&&v(x,S,f(b,S));x.prototype=w,w.constructor=x,o(l,g,x)}},a1dc:function(t,e,a){},a310:function(t,e,a){"use strict";a("a1dc")},abf2:function(t,e,a){},b970:function(t,e,a){},f3d2:function(t,e,a){"use strict";a("03ce")}}]);
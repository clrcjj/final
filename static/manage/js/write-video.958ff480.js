(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["write-video"],{"1c1f":function(t,e,i){},2423:function(t,e,i){"use strict";i.d(e,"g",(function(){return s})),i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return o})),i.d(e,"e",(function(){return n})),i.d(e,"a",(function(){return r})),i.d(e,"f",(function(){return c})),i.d(e,"b",(function(){return u}));var a=i("b775");function s(t,e){return Object(a["a"])({url:"/manage/article/createStaticFile",method:"POST",data:t||{}},e||{})}function l(t,e){return Object(a["a"])({url:"/manage/article/getAllArticle",method:"POST",data:t||{}},e||{})}function o(t,e){return Object(a["a"])({url:"/manage/article/getCurArticle",method:"POST",data:t||{}},e||{})}function n(t,e){return Object(a["a"])({url:"/manage/article/removeArticle",method:"POST",data:t||{}},e||{})}function r(t,e){return Object(a["a"])({url:"/manage/article/addArticle",method:"POST",data:t||{}},e||{})}function c(t,e){return Object(a["a"])({url:"/manage/article/updateArticle",method:"POST",data:t||{}},e||{})}function u(t,e){return Object(a["a"])({url:"/manage/article/changeArtState",method:"POST",data:t||{}},e||{})}},"3cb3":function(t,e,i){"use strict";var a=i("b591"),s=i("1de5"),l=i("5c02"),o=i("ad3e"),n=i("3642"),r=i("9610"),c=i("2b23"),u=i("af5e"),d=i("4b7d"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,h=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var i,a,u,d,f,p,b=n(this),x=o(b.length),w=s(t,x),C=arguments.length;if(0===C?i=a=0:1===C?(i=0,a=x-w):(i=C-2,a=h(v(l(e),0),x-w)),x+i-a>m)throw TypeError(g);for(u=r(b,a),d=0;d<a;d++)f=w+d,f in b&&c(u,d,b[f]);if(u.length=a,i<a){for(d=w;d<x-a;d++)f=d+a,p=d+i,f in b?b[p]=b[f]:delete b[p];for(d=x;d>x-a+i;d--)delete b[d-1]}else if(i>a)for(d=x-a;d>w;d--)f=d+a-1,p=d+i-1,f in b?b[p]=b[f]:delete b[p];for(d=0;d<i;d++)b[d+w]=arguments[d+2];return b.length=x-a+i,u}})},"4d50":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-drawer-cover",attrs:{time:"1577962209700"}},[i("el-drawer",{staticClass:"cat_info",attrs:{title:"查看所有封面图片",direction:"rtl",size:"550px",modal:!0,"append-to-body":!0,"close-on-press-escape":!1,"destroy-on-close":!0,visible:t.showState},on:{close:function(e){t.showState=!1},"update:visible":function(e){t.showState=e}}},[i("div",{staticClass:"moreInfo pub-flex pub-column",staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"pub-flex",staticStyle:{width:"100%"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:t.getUpLoadUrl(),"before-upload":t.authFile,headers:t.getHeaderConf(),data:{catName:"cover"},"show-file-list":!1,multiple:!1,"on-success":t.uploadSuccess}},[i("el-button",{staticStyle:{width:"100%",display:"block"},attrs:{type:"primary"}},[t._v("点击上传图片")])],1),i("div",{staticClass:"pub-flex1"},[i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("点击图片选择图片")])])],1),i("div",{staticStyle:{width:"100%",height:"20px"}}),i("div",{staticClass:"pub-flex1 cover-row ov-x-h ov-y-a",staticStyle:{width:"100%"}},[i("el-row",{attrs:{gutter:20}},t._l(t.list,(function(e){return i("el-col",{key:e.path,attrs:{span:8}},[i("div",{staticClass:"row-img-item",staticStyle:{padding:"3px"}},[i("div",{staticClass:"pr"},[i("img",{attrs:{src:t.createFilePath(e.path,"/api"),alt:""},on:{click:function(i){return t.selectCoverResult(e.path)}}}),i("i",{staticClass:"el-icon-close pa icon-btns ico-close",on:{click:function(i){return i.stopPropagation(),t.remindDialog(e.name)}}}),i("i",{staticClass:"el-icon-share pa icon-btns ico-share",on:{click:function(i){return i.stopPropagation(),t.showItemImgNetPath(e)}}}),e.occupt?i("p",{staticClass:"occupy-tip"},[t._v("该图片正在被使用中")]):t._e()])])])})),1)],1),i("div",{staticStyle:{width:"100%",height:"20px"}})])])],1)},s=[],l=(i("851f"),i("425f"),i("093a")),o=(i("2423"),i("b893")),n={data:function(){return{selectType:"video",showState:!1,list:[]}},methods:{showItemImgNetPath:function(t){var e=window.location,i=e.protocol+"//"+e.host;this.ajaxMsgTips({data:{code:200,text:i+t.path}})},selectCoverResult:function(t){this.$emit("select",t,"videoImage"),this.showState=!1},remindDialog:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteData(t)})).catch((function(){}))},deleteData:function(t){var e=this;Object(l["j"])({catName:"cover",fileName:t},{loading:!0}).then((function(t){e.ajaxMsgTips(t),200===t.data.code&&e.pullData({remind:!1})}))},getUpLoadUrl:function(){var t=Object(l["o"])();return Object(o["d"])()?"/api".concat(t):t},authFile:function(t){for(var e=[".jpg",".png",".jpeg",".gif"],i=t.name.lastIndexOf("."),a=t.name.substring(i).toLocaleLowerCase(),s=0,l=e;s<l.length;s++){var o=l[s];if(o===a)return!0}return this.$message({type:"warning",message:"该上传文件类型不符合要求！"}),!1},uploadSuccess:function(t,e,i){this.ajaxMsgTips({data:{code:t.code,text:t.text}}),200===t.code&&this.pullData({remind:!1})},getHeaderConf:function(){return{Token:Object(o["b"])("token").value}},pullData:function(t){var e=this;Object(l["e"])().then((function(i){t.remind&&e.ajaxMsgTips(i),200===i.data.code&&(e.list=i.data.value,t.cb&&"function"===typeof t.cb&&t.cb())}))}},created:function(){var t=this;this.$Bus.$off("changePickerCover"),this.$Bus.$on("changePickerCover",(function(e){t.selectType=e.hasOwnProperty("selectType")?e.selectType:"video",e.showState&&t.pullData({cb:function(){t.showState=e.showState},remind:!0})}))}},r=n,c=(i("fdc9"),i("5e27"),i("5d22")),u=Object(c["a"])(r,a,s,!1,null,"191cd1b2",null);e["a"]=u.exports},"59c9":function(t,e,i){"use strict";i("1c1f")},"5e27":function(t,e,i){"use strict";i("bbd2")},"65ca":function(t,e,i){"use strict";i("6ab3")},"6ab3":function(t,e,i){},"7cf1":function(t,e,i){var a=i("3642"),s=Math.floor,l="".replace,o=/\$([$&'`]|\d\d?|<[^>]*>)/g,n=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,i,r,c,u){var d=i+t.length,f=r.length,p=n;return void 0!==c&&(c=a(c),p=o),l.call(u,p,(function(a,l){var o;switch(l.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(d);case"<":o=c[l.slice(1,-1)];break;default:var n=+l;if(0===n)return a;if(n>f){var u=s(n/10);return 0===u?a:u<=f?void 0===r[u-1]?l.charAt(1):r[u-1]+l.charAt(1):a}o=r[n-1]}return void 0===o?"":o}))}},"94ff":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-drawer-poster",attrs:{time:"1578021849735"}},[i("el-drawer",{staticClass:"cat_info",attrs:{title:"查看所有海报图片",direction:"rtl",size:"550px",modal:!0,"append-to-body":!0,"close-on-press-escape":!1,"destroy-on-close":!0,visible:t.showState},on:{close:function(e){t.showState=!1},"update:visible":function(e){t.showState=e}}},[i("div",{staticClass:"moreInfo pub-flex pub-column",staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"pub-flex",staticStyle:{width:"100%"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:t.getUpLoadUrl(),"before-upload":t.authFile,headers:t.getHeaderConf(),data:{catName:"poster"},"show-file-list":!1,multiple:!1,"on-success":t.uploadSuccess}},[i("el-button",{staticStyle:{width:"100%",display:"block"},attrs:{type:"primary"}},[t._v("点击上传图片")])],1),i("div",{staticClass:"pub-flex1"},[i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("点击图片选择图片")])])],1),i("div",{staticStyle:{width:"100%",height:"20px"}}),i("div",{staticClass:"pub-flex1 poster-row ov-y-a ov-x-h",staticStyle:{width:"100%"}},[i("el-row",t._l(t.list,(function(e){return i("el-col",{key:e.path,staticStyle:{padding:"4px"},attrs:{span:24}},[i("div",{staticClass:"row-img-item",staticStyle:{padding:"3px"}},[i("div",{staticClass:"pr"},[i("img",{attrs:{src:t.createFilePath(e.path,"/api"),alt:""},on:{click:function(i){return t.selectCoverResult(e.path)}}}),i("i",{staticClass:"el-icon-close pa icon-close-btn",on:{click:function(i){return i.stopPropagation(),t.remindDialog(e.name)}}}),e.occupt?i("p",{staticClass:"occupy-tip"},[t._v("该图片正在被使用中")]):t._e()])])])})),1)],1),i("div",{staticStyle:{width:"100%",height:"20px"}})])])],1)},s=[],l=(i("851f"),i("425f"),i("093a")),o=i("b893"),n={data:function(){return{showState:!1,list:[]}},methods:{selectCoverResult:function(t){this.$emit("select",t,"poster"),this.showState=!1},remindDialog:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteData(t)})).catch((function(){}))},deleteData:function(t){var e=this;Object(l["j"])({catName:"poster",fileName:t},{loading:!0}).then((function(t){e.ajaxMsgTips(t),200===t.data.code&&e.pullData({remind:!1})}))},getUpLoadUrl:function(){var t=Object(l["o"])();return Object(o["d"])()?"/api".concat(t):t},authFile:function(t){for(var e=[".jpg",".png",".jpeg",".gif"],i=t.name.lastIndexOf("."),a=t.name.substring(i).toLocaleLowerCase(),s=0,l=e;s<l.length;s++){var o=l[s];if(o===a)return!0}return this.$message({type:"warning",message:"该上传文件类型不符合要求！"}),!1},uploadSuccess:function(t,e,i){this.ajaxMsgTips({data:{code:t.code,text:t.text}}),200===t.code&&this.pullData({remind:!1})},getHeaderConf:function(){return{Token:Object(o["b"])("token").value}},pullData:function(t){var e=this;Object(l["f"])().then((function(i){t.remind&&e.ajaxMsgTips(i),200===i.data.code&&(e.list=i.data.value,t.cb&&"function"===typeof t.cb&&t.cb())}))}},created:function(){var t=this;this.$Bus.$off("changePickerPoster"),this.$Bus.$on("changePickerPoster",(function(e){e.showState&&t.pullData({cb:function(){t.showState=e.showState},remind:!0})}))}},r=n,c=(i("d935"),i("65ca"),i("5d22")),u=Object(c["a"])(r,a,s,!1,null,"e9d043b8",null);e["a"]=u.exports},a2b5:function(t,e,i){"use strict";i("c5ed")},b39c:function(t,e,i){},b3a8:function(t,e,i){},b66b:function(t,e,i){"use strict";var a=i("acdf"),s=i("264b"),l=i("ad3e"),o=i("5c02"),n=i("31c4"),r=i("b520"),c=i("7cf1"),u=i("f261"),d=Math.max,f=Math.min,p=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,i,a){var v=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=a.REPLACE_KEEPS_$0,m=v?"$":"$0";return[function(i,a){var s=n(this),l=void 0==i?void 0:i[t];return void 0!==l?l.call(i,s,a):e.call(String(s),i,a)},function(t,a){if(!v&&h||"string"===typeof a&&-1===a.indexOf(m)){var n=i(e,t,this,a);if(n.done)return n.value}var g=s(t),b=String(this),x="function"===typeof a;x||(a=String(a));var w=g.global;if(w){var C=g.unicode;g.lastIndex=0}var y=[];while(1){var _=u(g,b);if(null===_)break;if(y.push(_),!w)break;var S=String(_[0]);""===S&&(g.lastIndex=r(b,l(g.lastIndex),C))}for(var $="",T=0,k=0;k<y.length;k++){_=y[k];for(var I=String(_[0]),j=d(f(o(_.index),b.length),0),D=[],O=1;O<_.length;O++)D.push(p(_[O]));var P=_.groups;if(x){var z=[I].concat(D,j,b);void 0!==P&&z.push(P);var E=String(a.apply(void 0,z))}else E=c(I,b,j,D,P,a);j>=T&&($+=b.slice(T,j)+E,T=j+I.length)}return $+b.slice(T)}]}))},bbd2:function(t,e,i){},c5ed:function(t,e,i){},d935:function(t,e,i){"use strict";i("b39c")},dfae:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pb20 pt20 pl20 pr20"},[i("div",{staticClass:"box pr"},[i("div",{ref:"tip-box",staticClass:"tip-box"},[i("div",{staticClass:"tip-btn btn-warning",on:{click:t.showDrawerInfo}},[i("div",[t._v("点")]),i("div",[t._v("击")]),i("div",[t._v("预")]),i("div",[t._v("览")])]),i("div",{staticClass:"tip-btn btn-primary mt10",on:{click:function(e){return t.remindDialog({type:"reset",text:"此操作将清空当前数据, 是否继续?"})}}},[i("div",[t._v("新")]),i("div",[t._v("增")]),i("div",[t._v("视")]),i("div",[t._v("频")])])]),i("div",[i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("视频标题：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.videoTitle,callback:function(e){t.$set(t.info,"videoTitle",e)},expression:"info.videoTitle"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("封面图片：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("div",{staticClass:"pub-flex1"},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.videoImage,callback:function(e){t.$set(t.info,"videoImage",e)},expression:"info.videoImage"}})],1),i("div",{staticClass:"pub-flex",staticStyle:{width:"130px","justify-content":"flex-end"}},[i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.$Bus.$emit("changePickerCover",{showState:!0})}}},[t._v("从资源库中选取")])],1)])])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("开启轮播图：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.openSwiper,callback:function(e){t.$set(t.info,"openSwiper",e)},expression:"info.openSwiper"}}),i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("开启后，需要上传轮播图，请注意！")])],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("选择轮播图：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("div",{staticClass:"pub-flex1"},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.poster,callback:function(e){t.$set(t.info,"poster",e)},expression:"info.poster"}})],1),i("div",{staticClass:"pub-flex",staticStyle:{width:"130px","justify-content":"flex-end"}},[i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.$Bus.$emit("changePickerPoster",{showState:!0})}}},[t._v("从资源库中选取")])],1)])])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("导演：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"英文逗号隔开,"},model:{value:t.info.director,callback:function(e){t.$set(t.info,"director",e)},expression:"info.director"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("主演：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"英文逗号隔开,"},model:{value:t.info.performer,callback:function(e){t.$set(t.info,"performer",e)},expression:"info.performer"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("类型：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:t.info.video_type,callback:function(e){t.$set(t.info,"video_type",e)},expression:"info.video_type"}},t._l(t.restaurants,(function(t){return i("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})),1)],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("评分：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex",staticStyle:{height:"32px","justify-content":"flex-start"}},[i("el-rate",{attrs:{max:10,"allow-half":!1,"show-text":!1},model:{value:t.info.video_rate,callback:function(e){t.$set(t.info,"video_rate",t._n(e))},expression:"info.video_rate"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("语言：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.language,callback:function(e){t.$set(t.info,"language",e)},expression:"info.language"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("发行地区：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.sub_region,callback:function(e){t.$set(t.info,"sub_region",e)},expression:"info.sub_region"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("发行时间：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.rel_time,callback:function(e){t.$set(t.info,"rel_time",e)},expression:"info.rel_time"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("更新时间：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-date-picker",{attrs:{size:"small","value-format":"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择日期时间"},model:{value:t.info.update_time,callback:function(e){t.$set(t.info,"update_time",e)},expression:"info.update_time"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("影片介绍：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.info.introduce,callback:function(e){t.$set(t.info,"introduce",e)},expression:"info.introduce"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("更新状态：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.info.remind_tip,callback:function(e){t.$set(t.info,"remind_tip",e)},expression:"info.remind_tip"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("关联新闻：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("div",{staticClass:"pub-flex1"},[i("el-input",{attrs:{size:"small",placeholder:"多条新闻中间用英文逗号(,)隔开"},model:{value:t.info.news_id,callback:function(e){t.$set(t.info,"news_id",e)},expression:"info.news_id"}})],1),i("div",{staticClass:"pub-flex",staticStyle:{width:"130px","justify-content":"flex-end"}},[i("el-popover",{attrs:{placement:"bottom-end",title:"选择新闻",width:"600",trigger:"click"},on:{show:function(e){return t.$Bus.$emit("showArticlePopover")}}},[i("popover-article"),i("el-button",{attrs:{slot:"reference",size:"small",type:"success"},slot:"reference"},[t._v("从资源库中选取")])],1)],1)])])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("是否置顶：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.popular,callback:function(e){t.$set(t.info,"popular",e)},expression:"info.popular"}}),i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("置顶视频后视频排序会靠前，请注意！")])],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("允许留言：")]),i("div",{staticClass:"row-con"},[i("div",[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.allow_reply,callback:function(e){t.$set(t.info,"allow_reply",e)},expression:"info.allow_reply"}})],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("是否显示：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.display,callback:function(e){t.$set(t.info,"display",e)},expression:"info.display"}}),i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("默认新建视频显示状态，请注意！")])],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("播放源是否排序：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dcdfe6"},model:{value:t.info.scource_sort,callback:function(e){t.$set(t.info,"scource_sort",e)},expression:"info.scource_sort"}}),i("p",{staticClass:"pl20",staticStyle:{color:"#F56C6C"}},[t._v("默认走系统排序，请注意！")])],1)])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("播放源：")]),i("div",{staticClass:"row-con"},[i("div",[i("div",{staticClass:"pub-flex"},[i("div",{staticStyle:{width:"140px"}},[i("el-select",{staticClass:"pr20",attrs:{size:"small",placeholder:"请选择"},model:{value:t.curSourceType,callback:function(e){t.curSourceType=e},expression:"curSourceType"}},t._l([{k:"内置播放器",v:"player"},{k:"外链播放器",v:"iframe"}],(function(t){return i("el-option",{key:t.v,attrs:{label:t.k,value:t.v}})})),1)],1),i("div",{staticClass:"pr20 pub-flex",staticStyle:{width:"200px"}},[i("span",{staticClass:"row-label"},[t._v("源名称：")]),i("div",{staticClass:"pub-flex1"},[i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addOneSource(e)}},model:{value:t.curSourceName,callback:function(e){t.curSourceName=e},expression:"curSourceName"}})],1)]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addOneSource}},[t._v("新增一组源")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.source.length,expression:"source.length"}],staticClass:"pub-flex pub-flex1",staticStyle:{"justify-content":"flex-end"}},[i("span",{staticClass:"row-label",staticStyle:{width:"90px"}},[t._v("移动当前源：")]),i("el-button-group",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.moveCurSourcePos("left")}}},[i("i",{staticClass:"fa fa-arrow-left",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),i("span",[t._v("向左移动")])]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.moveCurSourcePos("right")}}},[i("span",[t._v("向右移动")]),i("i",{staticClass:"fa fa-arrow-right",staticStyle:{"margin-left":"5px"},attrs:{"aria-hidden":"true"}})])],1)],1)],1),i("div",{staticClass:"tabs mt20"},[i("div",{staticClass:"bar pub-flex"},t._l(t.source,(function(e,a){return i("div",{class:t.curTabIndex===a?"active":"",on:{click:function(e){t.curTabIndex=a}}},[t._v(" "+t._s(e.name)+" "),i("i",{staticClass:"el-icon-close ml10",on:{click:function(e){return e.stopPropagation(),t.removeCurSource(a,e)}}})])})),0),i("div",{staticClass:"pr20 pl20",staticStyle:{border:"1px solid #ddd","border-radius":"4px"}},[i("div",{staticClass:"address pub-flex pt20"},[i("div",{staticClass:"pr20 pub-flex",staticStyle:{width:"200px"}},[i("span",{staticClass:"row-label"},[t._v("名称：")]),i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.target.name,callback:function(e){t.$set(t.target,"name",e)},expression:"target.name"}})],1),i("div",{staticClass:"pub-flex1 pub-flex pr20"},[i("span",{staticClass:"row-label"},[t._v("地址：")]),i("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.target.value,callback:function(e){t.$set(t.target,"value",e)},expression:"target.value"}})],1),i("div",[i("el-button",{attrs:{size:"small",type:"success"},on:{click:t.curListAddItem}},[t._v("确定")])],1),i("div",{staticClass:"pl20"},[i("el-button",{attrs:{type:"warning",size:"small"},on:{click:t.showSourceEditDialog}},[t._v("批量添加")])],1)]),i("div",{staticClass:"mt20",staticStyle:{height:"400px","overflow-y":"auto"}},t._l(t.source,(function(e,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.curTabIndex===a,expression:"curTabIndex === index1"}],key:e.z_name},[e.list.length?i("div",t._l(e.list,(function(e,s){return i("div",{staticClass:"pub-flex source-item"},[i("i",{staticClass:"el-icon-close ml20 pointer",on:{click:function(e){return t.removeCurItem(a,s)}}}),i("div",{staticClass:"pl20"},[i("span",[t._v("名称：")]),i("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(e.split("$")[0]))])]),i("div",{staticClass:"pl20"},[i("span",[t._v("地址：")]),i("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(e.split("$")[1]))])])])})),0):i("div",{staticClass:"text-center pt20 pb20"},[i("p",[t._v("暂无源")])])])})),0)])])])])]),i("div",{staticClass:"row-item clearfix"},[i("label",{staticClass:"pull-left",attrs:{for:""}},[t._v("提交选择：")]),i("div",{staticClass:"row-con"},[i("div",{staticClass:"pub-flex"},[t.isEdit?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.remindDialog({type:"edit",text:"此操作将更新一条数据, 是否继续?"})}}},[t._v("确认更新")]):i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.remindDialog({type:"add",text:"此操作将添加一条数据, 是否继续?"})}}},[t._v("确认添加")])],1)])])])]),i("drawer-cover",{on:{select:t.setDataValue}}),i("drawer-poster",{on:{select:t.setDataValue}}),i("drawer-info"),i("dialog-player"),i("dialog-source",{on:{select:t.deliveryResult}})],1)},s=[],l=(i("af60"),i("df47"),i("3cb3"),i("425f"),i("bc4a"),i("c12e"),i("b66b"),i("48d1"),i("ec76"),i("960e"),i("a1be")),o=i("8b46"),n=i("4d50"),r=i("94ff"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-edit-cource",attrs:{time:"1578144601505"}},[i("el-dialog",{attrs:{title:"批量添加播放源",visible:t.showState,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.showState=e}}},[i("div",{staticClass:"pb20"},[i("p",{staticStyle:{color:"#F56C6C"}},[t._v("注意：例如 HD高清$http://xxx.xxx.com/xxx/xxx/xxx/xxx/xxx.m3u8")]),i("p",{staticStyle:{color:"#F56C6C"}},[t._v("注意：多行回车换行，标题和url中间使用 "),i("span",{staticStyle:{color:"#409EFF"}},[t._v("$")]),t._v(" 隔开")])]),i("div",{},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:15,maxRows:15},placeholder:"请输入内容"},model:{value:t.sourceVal,callback:function(e){t.sourceVal=e},expression:"sourceVal"}})],1),i("div",{staticClass:"pt20 text-right"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.createList}},[t._v("确定")])],1)])],1)},u=[],d=(i("bf00"),{data:function(){return{showState:!1,sourceVal:"",curSource:[]}},methods:{createList:function(){var t=this,e=this.sourceVal.split("\n").filter((function(t){return t&&t.trim()}));e.length?this.$confirm("您输入了 ".concat(e.length," 条记录，是否确认？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$emit("select",e),t.showState=!1})).catch((function(){})):this.$message({type:"warning",message:"您没有输入任何记录！"})}},watch:{showState:function(t,e){t||(this.sourceVal="",this.curSource=[])}},created:function(){var t=this;this.$Bus.$off("changeEditSource"),this.$Bus.$on("changeEditSource",(function(e){t.showState=e}))}}),f=d,p=(i("59c9"),i("5d22")),v=Object(p["a"])(f,c,u,!1,null,"03ca0910",null),h=v.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"text-center"},[i("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"请输入内容"},on:{change:t.pullData},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[i("el-button",{staticClass:"pointer",attrs:{slot:"prepend",icon:"el-icon-refresh"},on:{click:t.pullData},slot:"prepend"}),i("el-button",{staticClass:"pointer",attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.pullData},slot:"append"})],1)],1),i("div",{staticClass:"mt10"},[i("el-table",{attrs:{border:"",height:300,data:t.tableData}},[i("el-table-column",{attrs:{property:"articleTitle",label:"文章名称"}}),i("el-table-column",{attrs:{width:"220",property:"_id",label:"文章ID"}})],1)],1),i("div",{staticClass:"text-center ov-x-a mt10"},[i("el-pagination",{staticClass:"pr20",attrs:{background:"","current-page":t.curPageNum,"page-sizes":[15,30,60,100],"page-size":t.curPageLen,layout:"total, prev, pager, next",total:t.pageTotal},on:{"current-change":t.pullNewPageData}})],1)])},g=[],b=(i("2798"),i("2423")),x={data:function(){return{searchVal:"",loading:!1,tableData:[],pageTotal:0,curPageNum:1,curPageLen:15}},methods:{pullNewPageData:function(t){this.curPageNum=t,this.pullData({loading:!1,msgTip:!1})},pullData:function(){var t=this;this.loading=!0;var e={page:this.curPageNum,limit:this.curPageLen};this.searchVal&&(e.search=this.searchVal),Object(b["c"])(e).then((function(e){if(t.ajaxMsgTips(e),200===e.data.code){var i=e.data.value;t.tableData=i.result,t.pageTotal=i.total}})).finally((function(){t.loading=!1}))}},created:function(){this.$Bus.$off("showArticlePopover"),this.$Bus.$on("showArticlePopover",this.pullData)}},w=x,C=Object(p["a"])(w,m,g,!1,null,"0d1f1f9d",null),y=C.exports,_=i("c24f7"),S=i("71b7"),$=i("cc69"),T=i("093a"),k={components:{DrawerCover:n["a"],DrawerPoster:r["a"],DrawerInfo:_["a"],PopoverArticle:y,DialogPlayer:S["a"],DialogSource:h},data:function(){return{isEdit:!1,_id:"",infos:{videoTitle:"",director:"",performer:"",video_type:"",video_rate:0,language:"",sub_region:"",rel_time:"",introduce:"",remind_tip:"",news_id:"",videoImage:"",video_tags:"",update_time:"",poster:"",popular:!1,allow_reply:!1,openSwiper:!1,display:!0,scource_sort:!1},info:{},source:[],target:{name:"",value:""},curSourceName:"",curSourceType:"player",curTabIndex:0,restaurants:[]}},methods:{showSourceEditDialog:function(){this.source.length?this.$Bus.$emit("changeEditSource",!0):this.$message({type:"warning",message:"没有播放源可供添加，请先添加一组播放源！",duration:1e3})},deliveryResult:function(t){this.source[this.curTabIndex].list=this.source[this.curTabIndex].list.concat(t)},showDrawerInfo:function(){var t=this.createInfoData({getType:!0});t&&this.$Bus.$emit("changeVideoDrawerState",{showState:!0,is_pull:!1,data:t})},remindDialog:function(t){var e=this;this.$confirm(t.text,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"add"===t.type?e.insertVideoInfo():"edit"===t.type?e.updateVideoInfo():"reset"===t.type&&e.$router.push({path:"/main/write-video",query:{time:(new Date).getTime()}})})).catch((function(){}))},searchTypeVal:function(){var t,e=this.info.video_type,i=Object(o["a"])(this.restaurants);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a._id===e)return a.name.replace("┣━━━━━","")}}catch(s){i.e(s)}finally{i.f()}},createInfoData:function(t){var e=t.getType,i=void 0!==e&&e;if(this.info.videoTitle.trim())if(this.info.videoImage.trim()){if(this.info.video_type.trim()&&24===this.info.video_type.length){var a,s={videoTitle:this.info.videoTitle.trim(),director:this.info.director.trim(),videoImage:this.info.videoImage.trim(),poster:this.info.poster.trim(),video_tags:this.info.video_tags.trim()?this.info.video_tags.trim().split(","):[],performer:this.info.performer.trim(),video_type:i?this.searchTypeVal():this.info.video_type.trim(),video_rate:this.info.video_rate,update_time:this.info.update_time,language:this.info.language.trim(),sub_region:this.info.sub_region.trim(),rel_time:this.info.rel_time.trim(),introduce:this.info.introduce.trim(),remind_tip:this.info.remind_tip.trim(),news_id:this.info.news_id.trim()?this.info.news_id.trim().split(","):[],popular:this.info.popular,allow_reply:this.info.allow_reply,openSwiper:this.info.openSwiper,display:this.info.display,scource_sort:this.info.scource_sort},l=this.source,n=[],r=Object(o["a"])(l);try{for(r.s();!(a=r.n()).done;){var c=a.value,u=Object.assign({},c);u.list=u.list.join("#"),n.push(u)}}catch(d){r.e(d)}finally{r.f()}return{info:s,source:n}}this.$message({type:"warning",message:"视频分类必填！",duration:1e3})}else this.$message({type:"warning",message:"封面图片必填！",duration:1e3});else this.$message({type:"warning",message:"视频标题必填！",duration:1e3})},updateVideoInfo:function(){var t=this,e=this.createInfoData({getType:!1});e&&(e["_id"]=this._id,Object(T["m"])(e).then((function(e){t.ajaxMsgTips(e),setTimeout((function(){t.$router.push({path:"/main/video"})}),500)})))},insertVideoInfo:function(){var t=this,e=this.createInfoData({getType:!1});e&&Object(T["b"])(e).then((function(e){t.ajaxMsgTips(e),setTimeout((function(){t.$router.push({path:"/main/video"})}),500)}))},setDataValue:function(t,e){this.info[e]=t},resetSourceItemIndex:function(){var t,e=Object(o["a"])(this.source.entries());try{for(e.s();!(t=e.n()).done;){var i=Object(l["a"])(t.value,2),a=i[0],s=i[1];s["index"]=a}}catch(n){e.e(n)}finally{e.f()}},moveCurSourcePos:function(t){if("left"===t){if(0===this.curTabIndex)return;var e=this.source[this.curTabIndex-1],i=this.source[this.curTabIndex];return this.$set(this.source,this.curTabIndex-1,i),this.$set(this.source,this.curTabIndex,e),this.curTabIndex--,void this.resetSourceItemIndex()}if("right"===t){if(this.curTabIndex===this.source.length-1)return;var a=this.source[this.curTabIndex+1],s=this.source[this.curTabIndex];this.$set(this.source,this.curTabIndex+1,s),this.$set(this.source,this.curTabIndex,a),this.curTabIndex++,this.resetSourceItemIndex()}},removeCurSource:function(t){this.source.splice(t,1)},curListAddItem:function(){this.source.length?this.target.name?this.target.value?(this.source[this.curTabIndex].list.push("".concat(this.target.name,"$").concat(this.target.value)),this.target={name:"",value:""}):this.$message({type:"warning",message:"请输入链接",duration:1e3}):this.$message({type:"warning",message:"请输入名称",duration:1e3}):this.$message({type:"warning",message:"请先添加一组源",duration:1e3})},addOneSource:function(){this.curSourceName?(this.source.push({index:this.source.length,name:this.curSourceName,z_name:(new Date).getTime()+"",type:this.curSourceType,list:[]}),this.curSourceName=""):this.$message({type:"warning",message:"请输入源名称",duration:1e3})},removeCurItem:function(t,e){this.source[t].list.splice(e,1)},pullAllTypes:function(){var t=this;Object($["b"])({},{loading:!0}).then((function(e){if(200===e.data.code){var i,a=[],s=Object(o["a"])(e.data.value);try{for(s.s();!(i=s.n()).done;){var l=i.value;if(a.push({name:l.name,_id:l._id}),l.children&&l.children.length){var n,r=Object(o["a"])(l.children);try{for(r.s();!(n=r.n()).done;){var c=n.value;a.push({name:"┣━━━━━"+c.name,_id:c._id})}}catch(u){r.e(u)}finally{r.f()}}}}catch(u){s.e(u)}finally{s.f()}t.restaurants=a}}))},pullCurVideoInfo:function(t){var e=this;Object(T["g"])({_id:t}).then((function(t){if(200===t.data.code&&t.data.value.length){var i,a=t.data.value[0],s=a.video_tags.join(","),l=Object(o["a"])(a.source);try{for(l.s();!(i=l.n()).done;){var n=i.value;n.list=n.list.split("#")}}catch(r){l.e(r)}finally{l.f()}a.news_id=a.news_id.join(","),e.source=a.source,e.info=Object.assign({},a,{video_tags:s})}})).catch((function(t){e.isEdit=!1,e.info=Object.assign({},e.infos)}))},setTipBtnStyle:function(t){var e=this.$refs["tip-box"],i=0;t&&(i=t.target.scrollTop),e&&e.style&&(e.style.top=document.body.clientHeight/2+i-45+"px")},initEvent:function(){var t=document.getElementsByClassName("cpt-con")[0];this.setTipBtnStyle(),t.onscroll=this.setTipBtnStyle},initSetting:function(){var t=this.$route.query._id;this.isEdit=!(!t||24!==t.length),this._id=this.isEdit?t:"",this.isEdit?this.pullCurVideoInfo(t):(this.info=Object.assign({},this.infos),this.source=[]),this.pullAllTypes()}},created:function(){this.initSetting()},watch:{$route:function(t,e){this.initSetting()}},mounted:function(){this.$nextTick(this.initEvent)},beforeDestroy:function(){var t=document.getElementsByClassName("cpt-con")[0];t.onresize=null}},I=k,j=(i("a2b5"),Object(p["a"])(I,a,s,!1,null,"44fdb5ce",null));e["default"]=j.exports},fdc9:function(t,e,i){"use strict";i("b3a8")}}]);